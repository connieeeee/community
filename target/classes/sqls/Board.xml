<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="board">
<select id="get_cate_list" resultType="bit.com.a.dto.BoardDto" parameterType="java.lang.Integer">
	SELECT B.BOARD_SEQ,
		   B.CATEGORY_SEQ,
		   B.BOARD_INFORM,
		   B.BOARD_CONFIRM,
		   B.BOARD_DELETE,
		   B.BOARD_NAME
	FROM BOARD B, BOARD_CATEGORY BC
	WHERE BC.CATEGORY_SEQ = B.CATEGORY_SEQ
	AND BC.CATEGORY_SEQ = #{category_seq }
	AND B.BOARD_DELETE = '0'
	AND B.BOARD_CONFIRM = '1'
</select>

<select id="get_board_post" resultType="bit.com.a.dto.MainDto" parameterType="java.lang.Integer">
	SELECT P.POST_SEQ, B.BOARD_SEQ, P.USER_SEQ, P.POST_TITLE,
	        P.POST_CONTENT, P.POST_IMAGE, P.WDATE, BC.CATEGORY_NAME,
		      UT.USER_NICKNAME, P.POST_DELETE, B.BOARD_NAME, P.READCOUNT
	FROM POST P, BOARD B, BOARD_CATEGORY BC, USER_TABLE UT
	WHERE P.BOARD_SEQ = B.BOARD_SEQ
	AND B.CATEGORY_SEQ= BC.CATEGORY_SEQ
	AND BC.CATEGORY_SEQ = #{category_seq }
	ORDER BY P.WDATE DESC
</select>

<select id="get_board_no" resultType="bit.com.a.dto.BoardDto" parameterType="java.lang.Integer">
	SELECT P.POST_SEQ, B.BOARD_SEQ, P.USER_SEQ, P.POST_TITLE,
	        P.POST_CONTENT, P.POST_IMAGE, P.WDATE, BC.CATEGORY_NAME,
		      UT.USER_NICKNAME, P.POST_DELETE, B.BOARD_NAME
	FROM POST P, BOARD B, BOARD_CATEGORY BC, USER_TABLE UT
	WHERE P.BOARD_SEQ = B.BOARD_SEQ
	AND B.CATEGORY_SEQ= BC.CATEGORY_SEQ
	AND BC.CATEGORY_SEQ = #{category_seq }
	ORDER BY P.WDATE DESC
</select>

<select id="get_board_cate" resultType="bit.com.a.dto.BoardDto" parameterType="java.lang.Integer">
	SELECT P.POST_SEQ, B.BOARD_SEQ, P.USER_SEQ, P.POST_TITLE,
	        P.POST_CONTENT, P.POST_IMAGE, P.WDATE, BC.CATEGORY_NAME,
		      UT.USER_NICKNAME, P.POST_DELETE, B.BOARD_NAME
	FROM POST P, BOARD B, BOARD_CATEGORY BC, USER_TABLE UT
	WHERE P.BOARD_SEQ = B.BOARD_SEQ
	AND B.CATEGORY_SEQ= BC.CATEGORY_SEQ
	AND BC.CATEGORY_SEQ = #{category_seq }
	ORDER BY P.WDATE DESC
</select>

<select id="get_board_list" resultType="bit.com.a.dto.MainDto" parameterType="java.lang.Integer">
	SELECT P.POST_SEQ, B.BOARD_SEQ, P.USER_SEQ, P.POST_TITLE,
	        P.POST_CONTENT, P.POST_IMAGE, P.WDATE, BC.CATEGORY_NAME,
		      UT.USER_NICKNAME, P.POST_DELETE, B.BOARD_NAME, P.READCOUNT,
		      	BC.CATEGORY_SEQ
	FROM POST P, BOARD B, BOARD_CATEGORY BC, USER_TABLE UT
	WHERE P.BOARD_SEQ = B.BOARD_SEQ
	AND B.CATEGORY_SEQ= BC.CATEGORY_SEQ
	AND B.BOARD_SEQ = #{board_seq }
	ORDER BY P.WDATE DESC
</select>

<insert id="add_board" parameterType="bit.com.a.dto.BoardDto">
	INSERT INTO BOARD
	VALUES(BOARD_SEQ.NEXTVAL,#{category_seq },#{board_name}, #{board_inform}, '0', '0', #{user_seq})
</insert>

</mapper>